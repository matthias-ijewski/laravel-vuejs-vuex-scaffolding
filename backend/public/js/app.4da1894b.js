(function(e){function t(t){for(var a,r,u=t[0],i=t[1],s=t[2],d=0,l=[];d<u.length;d++)r=u[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);f&&f(t);while(l.length)l.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var u=n[r];0!==o[u]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function u(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f62430ae","chunk-2d0b8ae0":"72f708c3","chunk-2d0bd57b":"e8cd4af3","chunk-2d0c4d78":"b31eb942","chunk-2d0c8d49":"b6d5d5b7","chunk-2d0dddc4":"2cccefcd","chunk-2d0e5441":"7e1ddc42","chunk-2d0e6911":"e76e1f61","chunk-2d22bef0":"c68fc1c9","chunk-e38056d2":"575ef0e1","chunk-9f098632":"f564e5ce","chunk-32a95a37":"aa802cbd","chunk-cc2d2dea":"de7b4d6b","chunk-dcceeea4":"8b557b5d","chunk-278d4ba2":"f99d3a8d","chunk-2d0b9f09":"c96f9c7a"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-e38056d2":1,"chunk-9f098632":1,"chunk-dcceeea4":1,"chunk-278d4ba2":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"31d6cfe0","chunk-2d0b8ae0":"31d6cfe0","chunk-2d0bd57b":"31d6cfe0","chunk-2d0c4d78":"31d6cfe0","chunk-2d0c8d49":"31d6cfe0","chunk-2d0dddc4":"31d6cfe0","chunk-2d0e5441":"31d6cfe0","chunk-2d0e6911":"31d6cfe0","chunk-2d22bef0":"31d6cfe0","chunk-e38056d2":"8855231f","chunk-9f098632":"e4b7695f","chunk-32a95a37":"31d6cfe0","chunk-cc2d2dea":"31d6cfe0","chunk-dcceeea4":"c7e5bf62","chunk-278d4ba2":"091550bc","chunk-2d0b9f09":"31d6cfe0"}[e]+".css",o=i.p+a,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===a||d===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],d=s.getAttribute("data-href");if(d===a||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],f.parentNode.removeChild(f),n(c)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var f=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},5046:function(e,t,n){"use strict";var a=n("c3b2"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"laratime"}},[n("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("router-link",{attrs:{to:{name:"account"}},scopedSlots:e._u([{key:"default",fn:function(t){t.href,t.route;var a=t.navigate;t.isActive,t.isExactActive;return[n("v-list-item",[n("v-list-item-avatar",{on:{click:a}},[n("v-img",{attrs:{src:"https://randomuser.me/api/portraits/men/78.jpg"}})],1),n("v-list-item-content",[n("v-list-item-title",{on:{click:a}},[e._v(" "+e._s((e.$store.getters.user||{}).fullname)+" ")])],1)],1)]}}])}),n("v-divider"),n("v-list",{attrs:{dense:""}},e._l(e.items,(function(t){return n("v-list-item",{key:t.title,attrs:{link:""}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),1)],1),n("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:""}},[n("v-app-bar-nav-icon",{on:{click:e.toggleDrawer}}),n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",{staticClass:"font-weight-light"},[e._v("Lara")]),n("span",[e._v("Time")])]),n("v-spacer"),n("router-link",{attrs:{to:"/signup"},scopedSlots:e._u([{key:"default",fn:function(t){t.href,t.route;var a=t.navigate,r=t.isActive,o=t.isExactActive;return[n("v-btn",{class:[r&&"router-link-active",o&&"router-link-exact-active"],attrs:{text:""},on:{click:a}},[n("span",{staticClass:"mr-2"},[e._v("Create Account")])])]}}])}),e.isLoggedIn?n("v-btn",{attrs:{text:""},on:{click:e.logout}},[n("span",{staticClass:"mr-2"},[e._v("Logout")])]):n("router-link",{attrs:{to:"/signin"},scopedSlots:e._u([{key:"default",fn:function(t){t.href,t.route;var a=t.navigate;t.isActive,t.isExactActive;return[n("v-btn",{attrs:{text:""},on:{click:a}},[n("span",{staticClass:"mr-2"},[e._v("Login")])])]}}])})],1),n("v-content",{attrs:{transition:"slide-x-transition"}},[n("router-view")],1)],1)},o=[],c=(n("d3b7"),{name:"App",computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},created:function(){this.$http.interceptors.response.use(void 0,(function(e){return new Promise((function(t,n){throw console.log(t,n),401===e.status&&e.config&&!e.config.__isRetryRequest&&this.$store.dispatch("logout"),e}))}))},data:function(){return{drawer:!0,items:[{title:"My Dashboard",icon:"mdi-account"}]}},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then((function(){e.$router.push("/signin")}))},toggleDrawer:function(){this.drawer=!this.drawer}}}),u=c,i=(n("5046"),n("2877")),s=n("6544"),d=n.n(s),l=n("7496"),f=n("40dc"),h=n("5bc1"),p=n("8336"),m=n("a75b"),v=n("ce7e"),b=n("132d"),g=n("adda"),k=n("8860"),_=n("da13"),w=n("8270"),y=n("5d23"),S=n("34c3"),A=n("f774"),O=n("2fa4"),P=n("2a7f"),I=Object(i["a"])(u,r,o,!1,null,"056caace",null),T=I.exports;d()(I,{VApp:l["a"],VAppBar:f["a"],VAppBarNavIcon:h["a"],VBtn:p["a"],VContent:m["a"],VDivider:v["a"],VIcon:b["a"],VImg:g["a"],VList:k["a"],VListItem:_["a"],VListItemAvatar:w["a"],VListItemContent:y["a"],VListItemIcon:S["a"],VListItemTitle:y["c"],VNavigationDrawer:A["a"],VSpacer:O["a"],VToolbarTitle:P["b"]});n("45fc");var x=n("8c4f"),L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},j=[],C={name:"home"},V=C,E=Object(i["a"])(V,L,j,!1,null,null,null),q=E.exports,$=n("1dce"),z=n.n($),N=n("2f62"),B=n("bc3a"),D=n.n(B);a["a"].use(N["a"]),Storage.prototype.setObj=function(e,t){return this.setItem(e,JSON.stringify(t))},Storage.prototype.getObj=function(e){return JSON.parse(this.getItem(e))};var F=new N["a"].Store({state:{status:"",token:localStorage.getObj("token")||{}},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t){var n=t.token;e.status="success",e.token=n},update_account_request:function(e){e.status="loading"},update_account_success:function(e,t){var n=t.token;e.status="success",e.token=n},update_account_error:function(e){e.status="error"},upload_avatar_request:function(e){e.status="loading"},upload_avatar_success:function(e,t){var n=t.avatarUrl;e.status="success",e.token.user.avatar=n},upload_avatar_error:function(e){e.status="error"},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token=""}},actions:{updateAccount:function(e,t){var n=this,a=e.commit;return new Promise((function(e,r){a("update_account_request");var o={firstname:t.firstname,lastname:t.lastname,email:t.email,_method:"PUT"};D()({url:"/api/account",data:o,method:"POST"}).then((function(t){var r=n.state.token;r.user=t.data.user,localStorage.setObj("token",r),a("update_account_success",{token:r}),e(t)})).catch((function(e){a("update_account_error"),localStorage.removeItem("token"),r(e)}))}))},uploadAvatar:function(e,t){var n=e.commit;return new Promise((function(e,a){n("upload_avatar_request");var r=new FormData;r.append("file",t.imageFile),D()({url:"/api/account/avatar",data:r,headers:{"Content-Type":"multipart/form-data"},method:"POST"}).then((function(t){var a=t.url;n("upload_avatar_success",{avatarUrl:a}),e(t)})).catch((function(e){n("update_account_error"),localStorage.removeItem("token"),a(e)}))}))},login:function(e,t){var n=e.commit;return new Promise((function(e,a){n("auth_request");var r={grant_type:"password",client_id:"3",client_secret:"z4ztfFpfewCf1615eqTHSzFL1ZbGiYAOyzY2wOXV",username:t.email,password:t.password,scope:""};D()({url:"127.0.0.1:8000/api/auth/token",data:r,method:"POST"}).then((function(t){var a=t.data;localStorage.setObj("token",a),D.a.defaults.headers.common["Authorization"]="Bearer "+a.access_token,n("auth_success",{token:a}),e(t)})).catch((function(e){n("auth_error"),localStorage.removeItem("token"),a(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e,n){console.log(n),t("logout"),localStorage.removeItem("token"),delete D.a.defaults.headers.common["Authorization"],e()}))},register:function(e,t){var n=e.commit;return new Promise((function(e,a){n("auth_request");var r={grant_type:"password",client_id:"3",client_secret:"z4ztfFpfewCf1615eqTHSzFL1ZbGiYAOyzY2wOXV",email:t.email,firstname:t.firstname,lastname:t.lastname,password:t.password,scope:""};D()({url:"127.0.0.1:8000/api/auth/register",data:r,method:"POST"}).then((function(t){var a=t.data;localStorage.setObj("token",a),D.a.defaults.headers.common["Authorization"]="Bearer "+a.access_token,n("auth_success",{token:a}),e(t)})).catch((function(e){n("auth_error",e),localStorage.removeItem("token"),a(e)}))}))}},getters:{isLoggedIn:function(e){return console.log("######## AUTH TOKEN ########"),console.log((e.token||{}).access_token),console.log("######## ########## ########"),!!(e.token||{}).access_token},authStatus:function(e){return e.status},user:function(e){return(e.token||{}).user}}});a["a"].use(z.a),a["a"].use(x["a"]);var U=[{path:"/secure",name:"secure",component:function(){return n.e("chunk-2d0b8ae0").then(n.bind(null,"305b"))},meta:{requiresAuth:!0}},{path:"/account",name:"account",component:function(){return Promise.all([n.e("chunk-e38056d2"),n.e("chunk-9f098632"),n.e("chunk-cc2d2dea")]).then(n.bind(null,"77be"))},meta:{requiresAuth:!0}},{path:"/",name:"home",component:q},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/signup",name:"",component:function(){return n.e("chunk-2d0dddc4").then(n.bind(null,"82d8"))},children:[{path:"",name:"signup",components:{default:function(){return n.e("chunk-2d0bd57b").then(n.bind(null,"2c1e"))},dialog:function(){return Promise.all([n.e("chunk-e38056d2"),n.e("chunk-9f098632"),n.e("chunk-dcceeea4"),n.e("chunk-278d4ba2")]).then(n.bind(null,"b05b"))}}}]},{path:"/signin",name:"",component:function(){return n.e("chunk-2d0dddc4").then(n.bind(null,"82d8"))},children:[{path:"",name:"signin",components:{default:function(){return n.e("chunk-2d0bd57b").then(n.bind(null,"2c1e"))},dialog:function(){return Promise.all([n.e("chunk-e38056d2"),n.e("chunk-9f098632"),n.e("chunk-32a95a37")]).then(n.bind(null,"798b"))}}}]},{path:"/users",name:"",component:function(){return n.e("chunk-2d0dddc4").then(n.bind(null,"82d8"))},children:[{name:"users.create",path:"create",components:{default:function(){return n.e("chunk-2d22bef0").then(n.bind(null,"f0a1"))},dialog:function(){return Promise.all([n.e("chunk-e38056d2"),n.e("chunk-dcceeea4"),n.e("chunk-2d0b9f09")]).then(n.bind(null,"34a3"))}}}]},{path:"/customers",name:"",component:function(){return n.e("chunk-2d0dddc4").then(n.bind(null,"82d8"))},children:[{name:"customers.index",path:"",component:function(){return n.e("chunk-2d0e5441").then(n.bind(null,"946f"))}},{name:"customers.create",path:"create",component:function(){return n.e("chunk-2d0c4d78").then(n.bind(null,"3d0a"))}},{name:"",path:":customer_id(\\d+)",component:function(){return n.e("chunk-2d0dddc4").then(n.bind(null,"82d8"))},children:[{name:"customers.show",path:"",component:function(){return n.e("chunk-2d0c8d49").then(n.bind(null,"570a"))}},{name:"customers.addresses.index",path:"addresses",component:function(){return n.e("chunk-2d0e6911").then(n.bind(null,"98fb"))}}]}]}],M=new x["a"]({mode:"history",base:"/",routes:U});M.beforeEach((function(e,t,n){if(console.log(t),e.matched.some((function(e){return e.meta.requiresAuth}))){if(F.getters.isLoggedIn)return void n();n("/signin")}else n()}));var H=M,J=n("f309");a["a"].use(J["a"]);var Y=new J["a"]({icons:{iconfont:"mdi"}});a["a"].config.productionTip=!1,a["a"].prototype.$http=D.a;var G=localStorage.getItem("token");G&&(a["a"].prototype.$http.defaults.headers.common["Authorization"]=G),new a["a"]({router:H,store:F,vuetify:Y,el:"#app",created:function(){null===this.$store.getters.user?console.log("user is null"):console.log("user is NOT null")},render:function(e){return e(T)}})},c3b2:function(e,t,n){}});
//# sourceMappingURL=app.4da1894b.js.map